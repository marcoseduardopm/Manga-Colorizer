# Manga-Colorizer forked from BinitDOX/Manga-Colorizer
For more information about the Manga-Colorizer, please look at the BinitDOX/Manga-Colorizer (https://github.com/BinitDOX/Manga-Colorizer). 

This repository represents minor changes to the original one to make the usage better suitable for use with any website.


## Demo Video - PC:
https://user-images.githubusercontent.com/93908298/227715568-52e4c510-aff5-40f7-aa5d-4954c3416253.mp4

## Main modifications:
- Saves the generated images on the server machine at the folder manga/{title}/{chapter}/;
- Modifications to make it work better with any website that has grayscale images;
- Modifications only compatible with <b>Chrome</b>.

## Server Usage Instructions (SELF HOSTING): 
0. These procedures were tested with Python 3.10;
1. Clone or download the repository as .zip and extract;
2. Download the <a href="https://drive.google.com/file/d/1qmxUEKADkEM4iYLp1fpPLLKnfZ6tcF-t/view?usp=sharing" rel="nofollow">Generator</a> weights and move it to <code>Backend/networks</code> folder;
3. If you do not have a GPU, edit app-stream.py and set <code>self.gpu = False</code> (~Line 61);
4. In the Backend folder, open a command prompt and run:
   - <code>pip install -r requirements.txt</code> For installing necessary modules;
   - Generate server keys at the Backend folder with <code>openssl req -nodes -newkey rsa:2048 -keyout server.key -out server.csr</code>
   - Then, made a new self-signed server certificate with: <code>openssl x509 -req -days 730 -in server.csr -signkey server.key -out server.crt</code>
5. If you are using GPU, you might need to change the PyTorch version with:
   - <code> pip3 uninstall torch torchvision </code>
   - And updated to the 11.8 version using a command generated by https://pytorch.org/get-started/locally/
   - <code> pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118 </code>
6. Run the Flask server with: <code>python app-stream.py</code>   
   - Backend should be running on localhost (https://127.0.0.1:5000) and Private IP (https://x.x.x.x:5000)
7. If you still have problems, please refer <a href="https://github.com/BinitDOX/Manga-Colorizer/issues/6">here</a> for known issues.
  

## Client Usage Instructions - PC - Chrome - AnySite: 
0. Open the server URL (Ex. https://x.x.x.x:5000)
   - It will show some certificate warnings as it is self-signed.
   - Click 'Advanced' and 'Proceed to x.x.x.x (unsafe)'.
   - You should now see 'Manga Colorizer is Up and Running!'
1. Goto <code>chrome://extensions/</code> webpage, turn on developer mode, and click 'Load Unpacked'.
2. Navigate to and select Frontend-Chrome-AnySite folder. At the extension configuration:
   - Input the server URL in the 'API URL'. If you are running on local machine, you can use <code>https://127.0.0.1:5000</code>. Click on test to verify if it works.
   - If you want to insert the Manga Title name manually, insert it at Title Name. If you do not do so, it will try to guess the title to save it in the Backbone/manga folder.
   - If you want to insert the chapter name manually, insert it at Chapter Name. If you do not do so, it will try to guess the chapter to save it on the saver Backbone/manga folder.
   - Insert the site domain to allow it.
3. Open any manga on any site which contains grayscale images. Note that you might need to adjust the Color Tolerance parameter at the extension;
4. Click the 'Run Colorize' button at the extension.
5. Wait (~20sec-1min, depending on Network and GPU) and Enjoy.

## Tips
- If you have to specify the chapter number, wait for it to finish converting the current chapter, click on "Stop Colorize" and then move to the next page, increase the chapter number, and run Colorize again. Doing this will help separate the folders created for different chapters.

## Credits:
- https://github.com/BinitDOX/Manga-Colorizer
- https://github.com/qweasdd/manga-colorization-v2 for AI Model and Weights.
